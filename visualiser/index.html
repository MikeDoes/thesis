<!DOCTYPE HTML>
<html>

<head>
	<title>Knowledge Graphs in the Age of Large Language Models: Data Explorer</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<script type="text/javascript" src="assets/js/vis-network.min.js"></script>
	<style type="text/css">
		#mynetwork {
			height: 70vh;/* 
			border: 1px solid rgba(50,50,50, 0.9); */
			background-color: rgba(255, 255, 255, 0.9);
			border-radius: 0px;
			box-shadow: 0 4px 8px 0 rgb(53 105 128 / 30%), 0 6px 20px 0 rgb(165 200 213 / 41%);
		}
		.title {
			color: white;
			font-weight: bold;
			font-size: 20px; 
			margin: 0 0 10px 10px;
		}

		.actions {
				min-height: 200px;
				position: relative;
			}
		
		.actions div {
			position: absolute;
			left: 50%;
			top: 50%;
			-webkit-transform: translate(-50%, -50%);
			transform: translate(-50%, -50%);
			padding: 0px 100px 0px 100px;
			width: 100%;
		}

		.arrow {
			font-size: 80px;
			position: absolute;
			top: 50%;
			-webkit-transform: translateY(-50%);
			transform: translateY(-50%);
			cursor: pointer;
		}
		#left_arrow{
			left: 0%;

		}
		#right_arrow{
			right: 0%;
		}
		#current_sentence{
			overflow-y: scroll;
			max-height: 150px;
		}

	</style>
</head>

<body class="homepage is-preload">
	<div id="page-wrapper">

		<!-- Header -->
		<div id="header-wrapper">
			<div id="header" class="container">

				<!-- Logo -->
				<h1 id="logo"><a href="index.html">Knowledge Graphs in the Age of Large Language Models</a></h1>

				<!-- Nav -->
				<nav id="nav">
					<ul style="font-weight: bolder;">
						<li>
							<a>Choose Dataset</a>
							<ul>
								<li><a href="?">OIE2016 (all)</a></li>
								
								
							</ul>
						</li>

						<li class="break">
							<a>Choose Method</a>
							<ul>
								<li class="title">Dataset</li>
								<li><a href="?model=all_dataset">OIE2016 Labels (all)</a></li>
								<li><a href="?model=train_dataset">OIE2016 Labels (train)</a></li>
								<li><a href="?model=test_dataset">OIE2016 Labels (test)</a></li>
								<li><a href="?model=spanoie_dataset">OIE2016 Labels spanoie (test)</a></li>
								<li class="title">Experimental</li>
								<li><a href="">E1 - Translator (supervised)</a></li>
								<li><a href="">E2 - Autoencoder (unsupervised)</a></li>
								<li><a href="">E3 - Autoencoder with syntax help (unsupervised)</a></li>
								<li><a href="?model=e4">E4 - GPT-3 (zero-shot)</a></li>
								<li><a href="?model=e4re">E4 - GPT-3 (zero-shot) (re-oie2016)</a></li>
								<li class="title">Control</li>
								<li><a href="">C1 - OpenIE 5.1 </a></li>
								<li><a href="">C2 - RNN OIE (supervised)</a></li>
								<li><a href="">C3 - Match and Map (unsupervised) </a></li>
								<li><a href="">C4 - Deep-Ex translation (zero-shot)</a></li>
								
								
								<!-- <li>
									<a href="#">Phasellus consequat</a>
									<ul>
										<li><a href="#">Lorem ipsum dolor</a></li>
										<li><a href="#">Phasellus consequat</a></li>
										<li><a href="#">Magna phasellus</a></li>
										<li><a href="#">Etiam dolore nisl</a></li>
									</ul>
								</li> -->
							</ul>
						</li>

						<!-- <li><a href="no-sidebar.html">No Sidebar</a></li> -->
					</ul>
				</nav>

			</div>

			<!-- Hero -->
			<section id="hero" class="container">
				<header>
					<!-- 
								<h2>Data Visualiser</h2> -->
				</header>
				<div id="mynetwork" style="width: 100%;"></div>
				<section class="actions">

					
					<div>
					<a id="left_arrow" class="arrow">&#8592;</a>
					<h5 id="current_sentence"></h5>
					<a id="right_arrow" class="arrow">&#8594;</a>
				</div>
					
				</section>
			</section>

		</div>

	<!-- 	
		<div class="wrapper">
			<div class="container">
				<div class="row">
					<section class="col-6 col-12-narrower feature">
						<div class="image-wrapper first">
							<a href="#" class="image featured first"><img src="images/pic01.jpg" alt="" /></a>
						</div>
						<header>
							<h2>Semper magna neque vel<br />
								adipiscing curabitur</h2>
						</header>
						<p>Lorem ipsum dolor sit amet consectetur et sed adipiscing elit. Curabitur vel
							sem sit dolor neque semper magna. Lorem ipsum dolor sit amet consectetur et sed
							adipiscing elit. Curabitur vel sem sit.</p>
						<ul class="actions">
							<li><a href="#" class="button">Elevate my awareness</a></li>
						</ul>
					</section>
					<section class="col-6 col-12-narrower feature">
						<div class="image-wrapper">
							<a href="#" class="image featured"><img src="images/pic02.jpg" alt="" /></a>
						</div>
						<header>
							<h2>Amet lorem ipsum dolor<br />
								sit consequat magna</h2>
						</header>
						<p>Lorem ipsum dolor sit amet consectetur et sed adipiscing elit. Curabitur vel
							sem sit dolor neque semper magna. Lorem ipsum dolor sit amet consectetur et sed
							adipiscing elit. Curabitur vel sem sit.</p>
						<ul class="actions">
							<li><a href="#" class="button">Elevate my awareness</a></li>
						</ul>
					</section>
				</div>
			</div>
		</div>

		<div id="promo-wrapper">
			<section id="promo">
				<h2>Neque semper magna et lorem ipsum adipiscing</h2>
				<a href="#" class="button">Breach the thresholds</a>
			</section>
		</div>

		<div class="wrapper">
			<section class="container">
				<header class="major">
					<h2>Sed magna consequat lorem curabitur tempus</h2>
					<p>Elit aliquam vulputate egestas euismod nunc semper vehicula lorem blandit</p>
				</header>
				<div class="row features">
					<section class="col-4 col-12-narrower feature">
						<div class="image-wrapper first">
							<a href="#" class="image featured"><img src="images/pic03.jpg" alt="" /></a>
						</div>
						<p>Lorem ipsum dolor sit amet consectetur et sed adipiscing elit. Curabitur
							vel sem sit dolor neque semper magna lorem ipsum.</p>
					</section>
					<section class="col-4 col-12-narrower feature">
						<div class="image-wrapper">
							<a href="#" class="image featured"><img src="images/pic04.jpg" alt="" /></a>
						</div>
						<p>Lorem ipsum dolor sit amet consectetur et sed adipiscing elit. Curabitur
							vel sem sit dolor neque semper magna lorem ipsum.</p>
					</section>
					<section class="col-4 col-12-narrower feature">
						<div class="image-wrapper">
							<a href="#" class="image featured"><img src="images/pic05.jpg" alt="" /></a>
						</div>
						<p>Lorem ipsum dolor sit amet consectetur et sed adipiscing elit. Curabitur
							vel sem sit dolor neque semper magna lorem ipsum.</p>
					</section>
				</div>
				<ul class="actions major">
					<li><a href="#" class="button">Elevate my awareness</a></li>
				</ul>
			</section>
		</div> -->

		<!-- <div id="footer-wrapper">
			<div id="footer" class="container">
				<header class="major">
					<h2>Source Text</h2>
					
				</header>
				<div class="row">
					<section class="col-6 col-12-narrower">
						<form method="post" action="#">
							<div class="row gtr-50">
								<div class="col-6 col-12-mobile">
									<input name="name" placeholder="Name" type="text" />
								</div>
								<div class="col-6 col-12-mobile">
									<input name="email" placeholder="Email" type="text" />
								</div>
								<div class="col-12">
									<textarea name="message" placeholder="Message"></textarea>
								</div>
								<div class="col-12">
									<ul class="actions">
										<li><input type="submit" value="Send Message" /></li>
										<li><input type="reset" value="Clear form" /></li>
									</ul>
								</div>
							</div>
						</form>
					</section>
					<section class="col-6 col-12-narrower">
						<div class="row gtr-0">
							<ul class="divided icons col-6 col-12-mobile">
								<li class="icon brands fa-twitter"><a href="#"><span
											class="extra">twitter.com/</span>untitled</a></li>
								<li class="icon brands fa-facebook-f"><a href="#"><span
											class="extra">facebook.com/</span>untitled</a></li>
								<li class="icon brands fa-dribbble"><a href="#"><span
											class="extra">dribbble.com/</span>untitled</a></li>
							</ul>
							<ul class="divided icons col-6 col-12-mobile">
								<li class="icon brands fa-instagram"><a href="#"><span
											class="extra">instagram.com/</span>untitled</a></li>
								<li class="icon brands fa-youtube"><a href="#"><span
											class="extra">youtube.com/</span>untitled</a></li>
								<li class="icon brands fa-pinterest"><a href="#"><span
											class="extra">pinterest.com/</span>untitled</a></li>
							</ul>
						</div>
					</section>
				</div> 
			</div>
			<div id="copyright" class="container">
				<ul class="menu">
					<li>&copy; Untitled. All rights reserved.</li>
					<li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
				</ul>
			</div> -->
		</div> -->
 
	</div>



	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.dropotron.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>



	<script type="text/javascript">
	
		//Getting parameters
        var url_string = window.location.href;
        var url = new URL(url_string);

		var dataset, model
		dataset = 'oie2016'
		model = 'all_dataset'

		if (url.searchParams.get("dataset") != null){
			dataset = url.searchParams.get("dataset");
		}
		if (url.searchParams.get("model") != null){
			model = url.searchParams.get("model");
		}
		
		
		//Data
		var dataset

		function get_data() {
			const Http = new XMLHttpRequest();
			
			const url = 'datasets/' + dataset + '_' + model +'.json';
			Http.open("GET", url);
			Http.send();

			Http.onreadystatechange = (e) => {
				if (Http.readyState == 4 && Http.status == 200) {
					dataset = JSON.parse(Http.responseText)
					console.log(dataset)
					display_sentence(dataset['text'][0])
					build_graph(dataset['labels'][0])
				}
			}
		}


		function build_graph(triplets_array) {
			node_list = []
			object_edges = []
			object_nodes = []

			/* Assign node set */
			for (let i = 0; i < triplets_array.length; i++) {
				node_list.push(triplets_array[i][0])
				node_list.push(triplets_array[i][2])
			}

			node_list = [...new Set(node_list)]
			
			for (let i = 0; i < node_list.length; i++) {
				object_nodes.push({ id: i, label: node_list[i]})
			}

			/* Attribute edges */
			for (let i = 0; i < triplets_array.length; i++) {
				object_edges.push({
				from: node_list.indexOf(triplets_array[i][0]), to: node_list.indexOf(triplets_array[i][2]), label: triplets_array[i][1], 
					color: "rgba(50,50,50,1)", 
					arrows: {
					to: {
						enabled: true,
					},
				}
				})
			}
					
			// create an array with nodes. Create array
			var nodes = new vis.DataSet(object_nodes);
			var edges = new vis.DataSet(object_edges);

			// create a network
			var container = document.getElementById("mynetwork");
			var data = {
				nodes: nodes,
				edges: edges,
			};
			var options = {};
			var network = new vis.Network(container, data, options);
		}

		function display_sentence(sentence){
			document.getElementById('current_sentence').innerHTML = sentence
		}


		get_data()

		/* Make the arrows work */
		var sentence_index = 0

		document.getElementById('right_arrow').addEventListener('click', ()=>{
			sentence_index += 1

			if (sentence_index> dataset['labels'].length-1){
				sentence_index = 0
			}
			display_sentence(dataset['text'][sentence_index])
			build_graph(dataset['labels'][sentence_index])


			}
		)
		document.getElementById('left_arrow').addEventListener('click', ()=>{
			sentence_index -= 1
			if (sentence_index<0){
				sentence_index = dataset['labels'].length-1
			}
			display_sentence(dataset['text'][sentence_index])
			build_graph(dataset['labels'][sentence_index])
			
			}
		)


	</script>

</body>

</html>